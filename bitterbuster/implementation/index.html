
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>BitterBuster Implementation - BitterBuster Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bitterbuster-implementation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BitterBuster Documentation" class="md-header__button md-logo" aria-label="BitterBuster Documentation" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BitterBuster Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BitterBuster Implementation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../installation/" class="md-tabs__link md-tabs__link--active">
        BitterBuster
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../candygenerator/docs/" class="md-tabs__link">
        Candy Generator
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../license/" class="md-tabs__link">
      License
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BitterBuster Documentation" class="md-nav__button md-logo" aria-label="BitterBuster Documentation" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    BitterBuster Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          BitterBuster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="BitterBuster" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          BitterBuster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../build/" class="md-nav__link">
        Build
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Implementation Details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Implementation Details
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-structure" class="md-nav__link">
    Code Structure
  </a>
  
    <nav class="md-nav" aria-label="Code Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenes" class="md-nav__link">
    Scenes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    Scripts
  </a>
  
    <nav class="md-nav" aria-label="Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controllers" class="md-nav__link">
    Controllers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenemanagers" class="md-nav__link">
    SceneManagers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sound" class="md-nav__link">
    Sound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#util" class="md-nav__link">
    Util
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiplayer-structure" class="md-nav__link">
    Multiplayer Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-game-flow" class="md-nav__link">
    General Game Flow
  </a>
  
    <nav class="md-nav" aria-label="General Game Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-scene" class="md-nav__link">
    Start Scene
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pregame-scene" class="md-nav__link">
    PreGame Scene
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-game" class="md-nav__link">
    Main Game
  </a>
  
    <nav class="md-nav" aria-label="Main Game">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-loop" class="md-nav__link">
    Main Loop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../future/" class="md-nav__link">
        Future Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Data Schema
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Schema" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Data Schema
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/config/" class="md-nav__link">
        Game Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/logging/" class="md-nav__link">
        Logging Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/ai/" class="md-nav__link">
        AI Support [WIP]
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Candy Generator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Candy Generator" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Candy Generator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../candygenerator/docs/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bitterbuster-implementation">BitterBuster Implementation</h1>
<h2 id="overview">Overview</h2>
<p>This document provides implementation details on BitterBuster. For further Unity documentation see their <a href="https://docs.unity3d.com/Manual/UnityManual.html">User Manual</a>.</p>
<h2 id="code-structure">Code Structure</h2>
<p>BitterBuster follows the standard folder structure of Unity Projects. Most edits to the game will take place in the <code>Assets</code> folder, which contains:</p>
<pre><code>Assets
| - Animations        # All animations + animation controllers
| - Art               # All art assets
| - Materials         # All object materials
| - Photon            # Photon Package
| - Plugins           # Other Unity Plugins
| - Prefabs           # All prefabs
| - Presets           # Editor presets
| - Rendering         # Rendering-related assets
| - Resources         # Special Resources folder
| - Scenes            # All game scenes
| - Scripts           # All C# scripts
| - Sounds            # All SFX + BGM sound assets
| - TextMesh Pro      # Text rendering package
| - Textures          # All textures
</code></pre>
<p>Most of these folders contain various assets that are used within the game, such as 3D models, 2D art, and sound. The below sections will highlight some of the key folders to be familiar with.</p>
<h3 id="scenes">Scenes</h3>
<p>Each "level" within Unity is captured within a <strong>Scene</strong>. For BitterBuster, there are three main scenes:</p>
<ul>
<li><strong>StartScreen:</strong> The first scene when a user opens the game, provides options to host, join, or quit the game.</li>
<li><strong>PreGame:</strong> The setup scene after a player joins or creates a room. This is where hosts update the settings of the game and players can select their role of Selector or Explorer.</li>
<li><strong>Game:</strong> The main game scene. This contains the entire Candy Kingdom world along with all of the components of the gameplay.</li>
</ul>
<p>To edit a particular <strong>Scene</strong>, double-click its corresponding file in this folder. </p>
<h3 id="resources">Resources</h3>
<p>The <a href="https://docs.unity3d.com/Manual/BestPracticeUnderstandingPerformanceInUnity6.html">Resources folder</a> is a special folder in Unity that allows for runtime loading of assets. It contains prefabs used by Photon to create multiplayer instances of during runtime (such as the player objects), along with default Bitter/Sweet candies that are loaded at runtime as well.</p>
<h3 id="scripts">Scripts</h3>
<p>All of the code within the game is located in this folder. Each of the code files is also separated into more specific directories based on functionality:</p>
<pre><code>Scripts
  | - Controllers        # GameObject controller scripts
  | - Logging            # Logging-related scripts
  |  | - LogEvents       # Defined log events
  | - SceneManagers      # Scene manager scripts
  | - Sound              # Sound-related scripts
  | - UI                 # UI-related scripts
  |  | - Components      # Subset of scripts for specific UI components
  | - Util               # General utility scripts
</code></pre>
<h4 id="controllers">Controllers</h4>
<p>Each of the scripts in this directory relate to a key GameObject used in the main game - for instance, controllers for the Explorer, for traps, for houses, etc. Each instance of this object will contain the corresponding controller script as a component, which will contain common functionalities and parameters for the object.</p>
<h4 id="logging">Logging</h4>
<p>All logging-related logic is contained in this folder. This consists of the overall <code>Logger</code> that is used by the host along with all of the different events that the <code>Logger</code> will log.</p>
<h4 id="scenemanagers">SceneManagers</h4>
<p>Each scene in BitterBuster has a corresponding manager class, which handles the overall logic of that given scene.</p>
<p>The <code>GameManager</code> class is the most important script in this folder as it contains all of the overarching logic for the main game. This includes handling game events by broadcasting them to all machines.</p>
<p>An additional class defined in this directory is the <code>EventManager</code> class, which is used in the main game to broadcast and add/remove listeners to all gameplay events.</p>
<h4 id="sound">Sound</h4>
<p>This directory contains managers and related scripts for SFX and BGM used in the game.</p>
<h4 id="ui">UI</h4>
<p>This directory contains managers and related scripts for all of the UI used in the game.</p>
<h4 id="util">Util</h4>
<p>This directory contains utility scripts used in the game. Some key ones to note are:
- <strong>Candy.cs:</strong> Contains definitions for Candy fields and other related classes, such as a <code>CandyLoader</code>.
- <strong>FileSelector.cs:</strong> Contains wrapper functions for a file selector plugin that allows for runtime usage of a local file selector. This is currently used to upload JSON files, candies, etc.
- <strong>RoomCustomProperties.cs:</strong> Allows for access and storage of room-based properties, such as the global game settings and Explorer/Selector ID. This is used to persist values between the   <code>PreGame</code> and the <code>Game</code> scenes.</p>
<h2 id="multiplayer-structure">Multiplayer Structure</h2>
<p>For more details, Photon provides a <a href="https://doc.photonengine.com/en-us/pun/current/getting-started/feature-overview">documentation wiki</a> describing how their many functionalities work.</p>
<p>To <a href="https://doc.photonengine.com/en-us/pun/current/lobby-and-matchmaking/matchmaking-and-lobby">start a multiplayer session</a>, one machine must first create a <strong>room</strong> with a room code. The creater of the room is considered the <code>MasterClient</code>. This room code can then be used by other machines to join the same room. If the <code>MasterClient</code> disconnects, one of the other players will then become the <code>MasterClient</code>; if there are no other players in the room, it is shut down.</p>
<p>When using Photon with Unity, all GameObjects are instantiated locally, and all function calls will only affect the local objects. In order to make cross-machine calls, we use <a href="https://doc.photonengine.com/en-us/pun/current/gameplay/rpcsandraiseevent">Remote Procedure Calls (RPCs)</a>. This will be what we make use of throughout the game to synchronize core game events between the different machines.</p>
<h2 id="general-game-flow">General Game Flow</h2>
<p>The following sections provide a general overview of what happens behind-the-scenes in a given play session.</p>
<h3 id="start-scene">Start Scene</h3>
<p>On the start screen, a player can select whether they would like to host or join the game. In clicking the button, the game will prompt them for a game code, then create or join the room respectively depending on which option they pick.</p>
<p><img alt="" src="../img/start_screen.png" /></p>
<p>Here, a host status is determined by setting the <code>playerType</code> field of the <code>Player</code> class to be <code>Host</code>. This value persists onto future scenes. From Photon's perspective, this host is also the <code>MasterClient</code>.</p>
<h3 id="pregame-scene">PreGame Scene</h3>
<p>Once a host has created a game, they are led to the pre-game screen:</p>
<p><img alt="" src="../img/pregame_screen.png" /></p>
<p>Here, they can also access the settings for the game:</p>
<p><img alt="" src="../img/pregame_settings.png" /></p>
<p>The host can then use this screen to upload any gameplay settings through the JSON configuration file. This value is stored using Photon's support for room-based custom properties, of which the main functions are wrapped in the <code>RoomCustomProperties</code> class.</p>
<p>From a player perspective who has joined the room, they can select their role on the pre-game screen:</p>
<p><img alt="" src="../img/pregame_player.png" /></p>
<p>This updates the <code>playerType</code> in the <code>Player</code> class to whichever they select, along with storing the user ID within the <code>RoomCustomProperties</code> class. Both values will persist into the main game scene; the former will be used for most of the gameplay, and the latter is used to ensure exclusivity of role selection (i.e. making sure we don't let both players choose the same role) and to handle player disconnects.</p>
<p>Once two players have joined and selected their roles, the host can click a button to start the game.</p>
<h3 id="main-game">Main Game</h3>
<h4 id="initialization">Initialization</h4>
<p>Upon entering the game, there are a number of items that are immediately processed behind the scenes.</p>
<p>Firstly, in using the <code>playerType</code> field, many objects will initialize/destory themselves based on what the local player's role is. For instance, the Selector will only see the Selector UI; houses will only initialize their own mailbox colors on the Explorer side; only the Host will be able to toggle between the two cameras; and so on.</p>
<p>The Host also will do some additional setup, such as loading the Candies. Because Candy images are only configurable on the Host side, only the Host will upload and store the images, and most future communication about Candies will be through passing their corresponding ID numbers around; only when the Candy really needs to be displayed (i.e. for the Selector's selection process) will the actual image bytes be passed along.</p>
<p>The two players are presented with their respective onboarding screens (which will differ depending on the player's roles), and then can start the game together.</p>
<p><img alt="" src="../img/game_explorer.png" />
<img alt="" src="../img/game_selector.png" /></p>
<h4 id="main-loop">Main Loop</h4>
<p>Afterwards, the two players enter the main gameplay loop. Some aspects, such as the Explorer's position and rotation, are values that are automatically synced by Photon. Otherwise, the general gameplay loop will result in the following:</p>
<ul>
<li>Player performs an action (visits a house, clicks a button), which causes some local changes</li>
<li>Action communicates with the GameManager through making a call <code>GameManager.Instance.Broadcast...(...)</code></li>
<li>The <code>GameManager</code> function will call a corresponding RPC function on each machine</li>
<li>The RPC function will locally broadcast the <code>GameEvent</code></li>
<li>Any listeners to the broadcasted event will respond accordingly</li>
</ul>
<p>This continues until time runs out and a game over state is triggered in the <code>GameManager</code>.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
        Material for MkDocs
        </a>
      </div>
    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.tracking", "toc.integrate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>